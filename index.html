<!DOCTYPE html>
<html lang="lb">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>P2 – Zuelen & Faarwen</title>
<style>
  /* Font */
  @font-face {
    font-family: 'Schoulschreft';
    src: url('https://github.com/albrechtclaire1007/schoulschreft/raw/main/schoulschreft_bold%5B2%5D.TTF') format('truetype');
    font-weight: bold;
    font-style: normal;
  }

  /* P2 style */
  :root{
    --p2-green:#A4D65E;   /* light */
    --p2-dark:#4E9A06;    /* border */
    --text:#333;
  }

  /* Remove mobile tap highlight, selections, outlines */
  *{ -webkit-tap-highlight-color:transparent; user-select:none; outline:none; }
  html,body{height:100%; margin:0; background:#fff; color:var(--text); font-family:'Schoulschreft', Arial, sans-serif;}

  .page{
    min-height:100%;
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    padding:5vmin; gap:3vmin;
  }

  h1{
    margin:0; text-align:center; color:var(--p2-dark);
    font-size:clamp(2rem,5vw,4rem);
  }

  /* Big square (shared) */
  .square{
    width:min(90vmin, 100%);
    aspect-ratio:1/1;
    background:#fff;
    border:12px solid var(--p2-dark);
    border-radius:40px;
    display:grid; place-items:center;
    font-size:min(45vmin,30rem); font-weight:800;
    cursor:pointer; position:relative;
    box-shadow:0 10px 30px rgba(0,0,0,.08);
    transition:transform .15s ease, background-color .25s ease, color .25s ease;
  }
  .square:active{ transform:scale(.97); background:var(--p2-green); color:#fff; }

  .reset{
    position:absolute; top:14px; right:18px;
    width:48px; height:48px; border-radius:50%;
    background:#fff; border:4px solid var(--p2-dark); color:var(--p2-dark);
    display:grid; place-items:center; font-size:1.6rem; cursor:pointer;
    transition:.2s; line-height:1;
  }
  .reset:hover{ background:var(--p2-dark); color:#fff; }

  .fade{ animation:fadeIn .35s ease; }
  @keyframes fadeIn{ from{opacity:0; transform:scale(.9)} to{opacity:1; transform:scale(1)} }

  /* Stage 2 layout */
  .sentence{
    display:flex; align-items:center; gap:min(2vmin,16px);
    font-size:clamp(2rem,4.5vw,3.2rem);
    flex-wrap:wrap; justify-content:center;
  }
  .inlineWrap{
    display:inline-grid; place-items:center;
    width:min(28vmin, 240px); aspect-ratio:1/1;
    border:10px solid var(--p2-dark); border-radius:28px;
    background:#fff; cursor:pointer; box-shadow:0 8px 24px rgba(0,0,0,.08);
    font-size:min(18vmin, 10rem);
    transition:transform .12s ease;
  }
  .inlineWrap:active{ transform:scale(.97); }

  /* Colour square starts filled; keep border the same */
  .colorSquare{
    background:#fff; /* will be overridden inline */
  }

  /* Simple helper buttons row (optional) */
  .controls{ display:flex; gap:12px; }
  .btn{
    font-family:'Schoulschreft', Arial, sans-serif;
    font-size:1.2rem; padding:.5rem .9rem; border-radius:14px;
    border:3px solid var(--p2-dark); background:#fff; color:var(--p2-dark);
    cursor:pointer; transition:.2s;
  }
  .btn:hover{ background:var(--p2-dark); color:#fff; }
</style>
</head>
<body>

  <!-- STAGE 1 -->
  <section id="stage1" class="page" aria-live="polite">
    <h1>Klick a so d’Zuel</h1>
    <div class="square" id="bigSquare">
      <div id="bigNum">—</div>
      <div class="reset" id="bigReset" title="Nei ufänken">↻</div>
    </div>
    <!-- (Optional) leave controls hidden; kept minimal -->
  </section>

  <!-- STAGE 2 -->
  <section id="stage2" class="page" style="display:none" aria-live="polite">
    <h1>Lies de Saz.</h1>
    <div class="sentence">
      <span>D’</span>

      <!-- number square (tap to change 1–20) -->
      <div id="numSq" class="inlineWrap" title="Klick fir eng Zuel ze wiesselen">
        <span id="numSqVal">1</span>
      </div>

      <span>ass</span>

      <!-- colour square (tap to change colour set) -->
      <div id="colSq" class="inlineWrap colorSquare" title="Klick fir d’Faarf ze wiesselen"></div>

      <span>.</span>
    </div>

    <div class="controls">
      <button id="backTo1" class="btn" title="Zréck op d’Zuelen">↩︎ Zréck</button>
      <button id="reshuffleBoth" class="btn" title="Refillen">↻ Nei mëschen</button>
    </div>
  </section>

<script>
/* ---------- helpers ---------- */
function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]] = [arr[j],arr[i]];
  }
  return arr;
}

/* ---------- Stage 1: 1–20 big square ---------- */
const stage1 = document.getElementById('stage1');
const stage2 = document.getElementById('stage2');

const bigSquare = document.getElementById('bigSquare');
const bigNum    = document.getElementById('bigNum');
const bigReset  = document.getElementById('bigReset');

let bag1 = [];

function refillBag1(){ bag1 = shuffle([...Array(20)].map((_,i)=>i+1)); }

function nextBig(){
  if(bag1.length===0){ // finished 1–20 -> switch to stage 2
    switchToStage2();
    return;
  }
  const n = bag1.pop();
  bigNum.textContent = n;
  bigNum.classList.remove('fade'); void bigNum.offsetWidth; bigNum.classList.add('fade');
}

function resetStage1(){
  refillBag1();
  bigNum.textContent = '—';
}

bigSquare.addEventListener('click', (e)=>{
  if(e.target===bigReset) return;
  nextBig();
});
bigReset.addEventListener('click', (e)=>{ e.stopPropagation(); resetStage1(); });

/* ---------- Stage 2: sentence with number + colour ---------- */
const numSq     = document.getElementById('numSq');
const numSqVal  = document.getElementById('numSqVal');
const colSq     = document.getElementById('colSq');

const backTo1   = document.getElementById('backTo1');
const reshuffleBoth = document.getElementById('reshuffleBoth');

let bag2 = [];        // numbers for stage 2
let colourBag = [];   // colours bag

// Colours (from your sheet): name + hex
const COLOURS = [
  {name:'wäiss',      hex:'#FFFFFF', text:'#333333', border:true},
  {name:'schwaarz',   hex:'#1F1F1F', text:'#FFFFFF'},
  {name:'rout',       hex:'#E53935', text:'#FFFFFF'},
  {name:'brong',      hex:'#8D6E63', text:'#FFFFFF'},
  {name:'orange',     hex:'#FB8C00', text:'#FFFFFF'},
  {name:'giel',       hex:'#FFD54F', text:'#333333'},
  {name:'gréng',      hex:'#66BB6A', text:'#FFFFFF'},
  {name:'donkelgréng',hex:'#1B5E20', text:'#FFFFFF'},
  {name:'hellblo',    hex:'#29B6F6', text:'#FFFFFF'},
  {name:'donkelblo',  hex:'#1E3A8A', text:'#FFFFFF'},
  {name:'rosa',       hex:'#F50078', text:'#FFFFFF'},
  {name:'mof',        hex:'#8E5AA6', text:'#FFFFFF'},
  {name:'hellgro',    hex:'#BDBDBD', text:'#333333'},
  {name:'donkelgro',  hex:'#2F3B3B', text:'#FFFFFF'}
];

function refillBag2(){ bag2 = shuffle([...Array(20)].map((_,i)=>i+1)); }
function refillColour(){ colourBag = shuffle([...COLOURS]); }

function nextNumSq(){
  if(bag2.length===0) refillBag2();
  const n = bag2.pop();
  numSqVal.textContent = n;
  numSqVal.classList.remove('fade'); void numSqVal.offsetWidth; numSqVal.classList.add('fade');
}
function nextColour(){
  if(colourBag.length===0) refillColour();
  const c = colourBag.pop();
  colSq.style.background = c.hex;
  colSq.style.color = c.text;
  // keep P2 dark border for consistency
  colSq.classList.remove('fade'); void colSq.offsetWidth; colSq.classList.add('fade');
}

numSq.addEventListener('click', nextNumSq);
colSq.addEventListener('click', nextColour);

backTo1.addEventListener('click', ()=>{
  // Return to stage 1 fresh
  stage2.style.display='none';
  stage1.style.display='flex';
  resetStage1();
});
reshuffleBoth.addEventListener('click', ()=>{
  refillBag2(); refillColour(); nextNumSq(); nextColour();
});

/* ---------- view switching ---------- */
function switchToStage2(){
  stage1.style.display='none';
  stage2.style.display='flex';
  // initialize stage 2 content
  if(bag2.length===0) refillBag2();
  if(colourBag.length===0) refillColour();
  nextNumSq();
  nextColour();
}

/* ---------- init ---------- */
refillBag1();
</script>
</body>
</html>

